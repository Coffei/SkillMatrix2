<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	template="/WEB-INF/templates/default.xhtml"
	xmlns:fn="http://java.sun.com/jsp/jstl/functions"
	xmlns:rich="http://richfaces.org/rich"
	xmlns:a4j="http://richfaces.org/a4j">

	<ui:define name="scripts">
	<script>
	function clearAll(event) {
		var files = new Array();
		var data = event.rf.data;
		for(var i in data) {
			clear(data[i].name);
		}
	}
	</script>
	</ui:define>
	<ui:define name="title">Import</ui:define>
	<ui:define name="content">
		<a4j:jsFunction name="clear" action="#{importController.clear()}" >
			<a4j:param name="names" assignTo="#{importController.clearFileName}"  />
		</a4j:jsFunction>

	  <h:form >
	  	<rich:messages  />
	  
		<rich:fileUpload addLabel="Import tags"  listHeight="150px" maxFilesQuantity="3"  noDuplicate="true"  onclear="clearAll(event)" fileUploadListener="#{importController.uploadListener}" styleClass="upload" >
		
		</rich:fileUpload>
				
		<h:commandButton action="#{importController.submitFiles()}" value="Process files" styleClass="submit" onclick="#{rich:component('waitpopup')}.show();" />		 
		
		<rich:popupPanel id="waitpopup" modal="true" autosized="true" moveable="false" resizeable="false">
			<div class="waitpopup">
				<h3>Please wait...</h3>
			</div>
			
		</rich:popupPanel>
		
	  </h:form>
	</ui:define>
</ui:composition>