<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	template="/WEB-INF/templates/default.xhtml"
	xmlns:fn="http://java.sun.com/jsp/jstl/functions"
	xmlns:rich="http://richfaces.org/rich"
	xmlns:a4j="http://richfaces.org/a4j">

	<ui:define name="title">Enter knowledge</ui:define>
	<ui:define name="content">
	
	<h:panelGroup rendered="#{knowledgeController.member ne null}">
	<h1><h:outputText value="#{knowledgeController.member.name}" /></h1>
	<h:messages infoClass="success" errorClass="error"/>
	<h:form>
	
	<h:commandButton action="#{knowledgeController.submit()}" value="Save" styleClass="submit" style="margin-top: 0px;" />
	
		<rich:dataTable value="#{knowledgeController.sbrs}" var="sbr" styleClass="simpletablestyle">
			<f:facet name="header">
				<rich:columnGroup>
					<rich:column>Tag</rich:column>
					<rich:column>Knowledge</rich:column>
				</rich:columnGroup>
			</f:facet>
			
			<rich:column colspan="2">
				<span class="sbrsubtoggle">
					<rich:collapsibleSubTableToggler for="sbrtable" collapsedLabel="#{sbr.name}" expandedLabel="#{sbr.name}" />
				</span>
			</rich:column>
			<rich:collapsibleSubTable id="sbrtable" value="#{knowledgeController.getPackagesBySbr(sbr)}" var="entry" expandMode="client" expanded="#{false}" columnClasses="namecol,selectcol">
				<rich:column>
					<h:outputText value="#{entry.key.name}" />
				</rich:column>
				<rich:column>
					<h:selectOneMenu value="#{knowledgeController.knowledge[entry.key]}" converter="javax.faces.Integer" style="font-size : small;">
						<f:selectItem itemLabel="-no knowledge-" itemValue="-1"
								noSelectionOption="true" />
						<f:selectItem itemLabel="Beginner" itemValue="0" />
						<f:selectItem itemLabel="Intermediate" itemValue="1" />
						<f:selectItem itemLabel="Expert" itemValue="2" />
					</h:selectOneMenu>
				</rich:column>
			</rich:collapsibleSubTable>
		
		</rich:dataTable>
		<h:commandButton action="#{knowledgeController.submit()}" value="Save" styleClass="submit"/>
	</h:form>
	</h:panelGroup>
	</ui:define>
</ui:composition>