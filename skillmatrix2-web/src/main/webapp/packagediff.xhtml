<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	template="/WEB-INF/templates/default.xhtml"
	xmlns:fn="http://java.sun.com/jsp/jstl/functions"
	xmlns:rich="http://richfaces.org/rich"
	xmlns:a4j="http://richfaces.org/a4j">

	<ui:define name="title">Diff- Tag</ui:define>
	<ui:define name="content">
		<h:outputStylesheet>
			.pkgtable {
				width: 370px;
			}
		</h:outputStylesheet>
	
		<rich:messages />
		<h:panelGroup rendered="#{packageDiffController.steps ge 2}">
			<div class="pkgtable" style="border-bottom: 2px solid black; text-align: center;">
				<h3><h:outputText value="#{packageDiffController.currentStep}. / #{packageDiffController.steps} pages" /></h3>
			</div>
		</h:panelGroup>
	
		<h:form>
			<rich:dataTable id="adds" value="#{packageDiffController.diff.added}" var="pkg" styleClass="pkgtable" columnClasses="namecol,selectcol,numcol" rendered="#{not empty packageDiffController.diff.added}" >
				<f:facet name="caption">
					<h3 style="color: #007900">Added tags</h3>
				</f:facet>
			
				<rich:column>
					<f:facet name="header">Tag</f:facet>
					<h:outputText value="#{pkg.name}" styleClass="name"/>
				</rich:column>
				
				<rich:column>
					<f:facet name="header">SBR</f:facet>
					<h:selectOneMenu value="#{packageDiffController.sbrs[pkg]}" converter="javax.faces.Long">
						<f:selectItem itemValue="-1" itemLabel="-no sbr-" noSelectionOption="true"/>
						<f:selectItems value="#{SBRs}" var="sbr" itemValue="#{sbr.id}" itemLabel="#{sbr.name}" />
					</h:selectOneMenu>
				</rich:column>
				
				<rich:column>
					<f:facet name="header">
						<a4j:commandLink value="Add" action="#{packageDiffController.reverseAdd()}" execute="adds" render="adds" />
					</f:facet>
					<h:selectBooleanCheckbox value="#{packageDiffController.actions[pkg]}" />
				</rich:column>
			
			</rich:dataTable>
	
	
			<rich:dataTable id="deprecates" value="#{packageDiffController.diff.deprecated}" styleClass="pkgtable" var="pkg" columnClasses="namecol,selectcol,numcol,numcol" rendered="#{not empty packageDiffController.diff.deprecated}">
				<f:facet name="caption">
					<h3 style="color: #990000">Deprecated tags</h3>
				</f:facet>
	
				<rich:column>
					<f:facet name="header">Tag</f:facet>
					<h:outputText value="#{pkg.name}" styleClass="name"/>
				</rich:column>
				
				<rich:column>
					<f:facet name="header">SBR</f:facet>
					<h:outputText value="#{pkg.sbr==null? '' : pkg.sbr.name}" />
				</rich:column>
				
				<rich:column>
					<f:facet name="header">
						<a4j:commandLink value="Deprecate" action="#{packageDiffController.reverseDeprecate()}" execute="deprecates" render="deprecates" />
					</f:facet>
					<h:selectBooleanCheckbox value="#{packageDiffController.actions[pkg]}" />
				</rich:column>
				
				<rich:column>
					<f:facet name="header">
						<a4j:commandLink value="Delete" action="#{packageDiffController.reverseDelete()}" execute="deprecates" render="deprecates" />
					</f:facet>
					<h:selectBooleanCheckbox value="#{packageDiffController.deletes[pkg]}" />
				</rich:column>
				
			
			</rich:dataTable>
			
			<rich:dataTable id="undeprecates" value="#{packageDiffController.diff.undeprecated}" var="pkg" styleClass="pkgtable" columnClasses="namecol,selectcol,numcol" rendered="#{not empty packageDiffController.diff.undeprecated}">
				<f:facet name="caption">
					<h3>UnDeprecated tags</h3>
				</f:facet>
				
				<rich:column>
					<f:facet name="header">Tag</f:facet>
					<h:outputText value="#{pkg.name}" styleClass="name" />
				</rich:column>
				
				<rich:column>
					<f:facet name="header">SBR</f:facet>
					<h:outputText value="#{pkg.sbr==null? '' : pkg.sbr.name}" />
				</rich:column>
				
				<rich:column>
					<f:facet name="header">
						<a4j:commandLink value="UnDeprecate" action="#{packageDiffController.reverseUndeprecate()}" execute="undeprecates" render="undeprecates" />
					</f:facet>
					<h:selectBooleanCheckbox value="#{packageDiffController.actions[pkg]}" />
				</rich:column>
			
			</rich:dataTable>
			
			<h:commandButton value="#{packageDiffController.currentStep==packageDiffController.steps? 'Process &amp; Finish':'Process &amp; Go to next'}" action="#{packageDiffController.submit()}" styleClass="submit"/>
		</h:form>	
	</ui:define>
</ui:composition>